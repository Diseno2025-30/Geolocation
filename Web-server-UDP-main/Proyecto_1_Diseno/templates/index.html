<!DOCTYPE html>
<html>
<head>
    <title>GPS Data</title>
</head>
<body>
    <h1>Coordenadas GPS</h1>
    <div id="data-container"></div>

    <script>
        function fetchCoordinates() {
            fetch('/coordenadas')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('data-container');
                    container.innerHTML = ''; // Limpia el contenedor
                    data.forEach(coord => {
                        const p = document.createElement('p');
                        p.textContent = `Latitud: ${coord.lat}, Longitud: ${coord.lon}, Hora: ${coord.timestamp}, Fuente: ${coord.source}`;
                        container.appendChild(p);
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // Llama a la función cada 3 segundos para obtener nuevos datos
        setInterval(fetchCoordinates, 3000);

        // Llama a la función una vez al inicio
        fetchCoordinates();
    </script>
</body>
</html>