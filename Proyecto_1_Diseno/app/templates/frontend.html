{% extends "_base.html" %}

{% block title %}Real Time{% endblock %}

{% block page_css %}
    <link rel="stylesheet" href="{{ get_static_path('css/realtime.css') }}">
{% endblock %}

{% block hidden_data %}
    <div style="display: none;">
        <span id="status">OFFLINE</span>
        <span id="lastUpdate">Never</span>
        <span id="puntosTrayectoria">0</span>
    </div>
{% endblock %}

{% block modal_info_fields %}
    <div class="modal-field">
        <span class="modal-label">Modo:</span>
        <span class="modal-value mode-value">REAL-TIME</span>
    </div>
    <div class="modal-field">
        <span class="modal-label">Status:</span>
        <span id="modalStatus" class="modal-value">OFFLINE</span>
    </div>
    <div class="modal-field">
        <span class="modal-label">Última actualización:</span>
        <span id="modalLastUpdate" class="modal-value">Never</span>
    </div>
    <div class="modal-field">
        <span class="modal-label">Puntos GPS en trayectoria:</span>
        <span id="modalPuntos" class="modal-value">0</span>
    </div>
{% endblock %}

{% block page_name %}Real-Time{% endblock %}

{% block main_content %}
    <div class="controls">
        <button class="btn" onclick="limpiarTrayectoria()">Limpiar Trayectoria</button>
        <button class="btn" onclick="toggleTrayectoria()">
            <span id="toggleText">Ocultar Trayectoria</span>
        </button>
        <button class="btn" onclick="regenerarRuta()" title="Regenerar toda la ruta siguiendo las calles">
            Regenerar Ruta
        </button>
    </div>

    <h2>Ubicación en Tiempo Real</h2>
    <div id="map"></div>

    <div class="coordinates">
        <h2>Posición Actual</h2>
        <div class="field">
            <span class="label">Latitude:</span>
            <span id="latitude" class="value">---.------</span>
        </div>
        <div class="field">
            <span class="label">Longitude:</span>
            <span id="longitude" class="value">---.------</span>
        </div>
        <div class="field">
            <span class="label">Device ID:</span>
            <span id="deviceId" class="value">---</span>
        </div>
        <div class="field">
            <span class="label">Timestamp:</span>
            <span id="timestamp" class="value">---</span>
        </div>
    </div>
{% endblock %}

{% block page_js %}
    <script src="{{ get_static_path('js/realtime.js') }}"></script>
{% endblock %}