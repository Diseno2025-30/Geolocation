<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ name }} - Real Time</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/realtime.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sidebar.css') }}">
</head>
<body>
    <!-- Elementos ocultos para almacenar datos del sistema -->
    <div style="display: none;">
        <span id="status">OFFLINE</span>
        <span id="lastUpdate">Never</span>
        <span id="puntosTrayectoria">0</span>
    </div>

    <!-- Bot√≥n de navegaci√≥n flotante -->
    <button id="navBtn" class="nav-btn" title="Navegaci√≥n">
        <span class="nav-icon">‚ò∞</span>
    </button>

    <!-- Modal de navegaci√≥n -->
    <div id="navModal" class="modal">
        <div class="modal-content nav-modal-content">
            <button class="modal-close" id="closeNavModal">&times;</button>
            <h3>Navegaci√≥n</h3>
            <div class="modal-body">
                <!-- Navegaci√≥n entre vistas -->
                <div class="sidebar-section">
                    <h4>Vistas</h4>
                    <button class="sidebar-link active">
                        <span class="link-icon">üïê</span>
                        Real-Time
                    </button>
                    <a id="historicalLink" class="sidebar-link">
                        <span class="link-icon">üìä</span>
                        Historical View
                    </a>
                </div>

                <!-- Navegaci√≥n entre rastreadores -->
                <div id="navigationSidebar" class="sidebar-section">
                    <h4>Rastreadores</h4>
                </div>
            </div>
        </div>
    </div>

    <!-- Bot√≥n de informaci√≥n flotante -->
    <button id="infoBtn" class="info-btn" title="Informaci√≥n del Sistema">
        <span class="info-icon">i</span>
    </button>

    <!-- Modal de informaci√≥n -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="closeModal">&times;</button>
            <h3>Informaci√≥n del Sistema</h3>
            <div class="modal-body">
                <div class="modal-field">
                    <span class="modal-label">Modo:</span>
                    <span class="modal-value mode-value">REAL-TIME</span>
                </div>
                <div class="modal-field">
                    <span class="modal-label">Status:</span>
                    <span id="modalStatus" class="modal-value">OFFLINE</span>
                </div>
                <div class="modal-field">
                    <span class="modal-label">√öltima actualizaci√≥n:</span>
                    <span id="modalLastUpdate" class="modal-value">Never</span>
                </div>
                <div class="modal-field">
                    <span class="modal-label">Puntos en trayectoria:</span>
                    <span id="modalPuntos" class="modal-value">0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenedor principal -->
    <div id="mainContent" class="main-content">
        <div class="container">
            <h1>Rastreador {{ name }}</h1>

            <!-- Controls -->
            <div class="controls">
                <button class="btn" onclick="limpiarTrayectoria()">Limpiar Trayectoria</button>
                <button class="btn" onclick="toggleTrayectoria()">
                    <span id="toggleText">Ocultar Trayectoria</span>
                </button>
            </div>

            <!-- Map -->
            <h2>Ubicaci√≥n en Tiempo Real</h2>
            <div id="map"></div>

            <!-- Coordinates display -->
            <div class="coordinates">
                <h2>Posici√≥n Actual</h2>
                <div class="field">
                    <span class="label">Latitude:</span>
                    <span id="latitude" class="value">---.------</span>
                </div>
                <div class="field">
                    <span class="label">Longitude:</span>
                    <span id="longitude" class="value">---.------</span>
                </div>
                <div class="field">
                    <span class="label">Device ID:</span>
                    <span id="deviceId" class="value">---</span>
                </div>
                <div class="field">
                    <span class="label">Timestamp:</span>
                    <span id="timestamp" class="value">---</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/navigation.js') }}"></script>
    <script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>
    <script src="{{ url_for('static', filename='js/realtime.js') }}"></script>
</body>
</html>
